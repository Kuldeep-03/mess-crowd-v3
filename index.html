<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Smart Mess Crowd Predictor</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>

<!-- Background decoration -->
<div class="bg-blur bg1"></div>
<div class="bg-blur bg2"></div>

<h1>ğŸ½ï¸ Smart Mess Crowd Management</h1>

<!-- Top controls -->
<div class="top-controls">
  <button onclick="toggleAdmin()">ğŸ” Admin Login</button>
  <button onclick="toggleDark()">ğŸŒ™ Dark Mode</button>
</div>

<!-- Peak window warning -->
<div id="peakWarning" class="peak-warning hidden">
  âš ï¸ Peak ending window â€” congestion may spike suddenly
</div>

<!-- Inputs -->
<div class="inputs">
  <h3>Current Situation</h3>

  <label>Meal Type</label>
  <select id="meal">
    <option>Breakfast</option>
    <option>Lunch</option>
    <option>Dinner</option>
  </select>

  <label>Queue Length</label>
  <select id="queue">
    <option>Low</option>
    <option>Medium</option>
    <option>High</option>
  </select>

  <label>Seats Occupied (%)</label>
  <input type="number" id="seats" value="60" min="0" max="100">

  <label>Service Speed</label>
  <select id="service">
    <option>Fast</option>
    <option>Moderate</option>
    <option>Slow</option>
  </select>

  <label>Queue Defaulters</label>
  <select id="defaulters">
    <option>Low</option>
    <option>Medium</option>
    <option>High</option>
  </select>

  <label>Average Eating Time (minutes)</label>
  <input type="number" id="eatTime" value="10" min="5" max="20">

  <button class="primary" onclick="runPrediction()">Predict</button>
</div>

<!-- Skeleton loader -->
<div id="loader" class="skeleton hidden"></div>

<!-- Output summary -->
<div class="output summary">
  <span id="decisionBadge" class="badge">â€”</span>
  <h2 id="level">â€”</h2>

  <div class="mli-counter">
    MLI:
    <span id="mliValue">0</span>%
  </div>

  <p id="details"></p>
  <p id="forecast"></p>

  <span class="tooltip">
    ğŸ¤– Why this prediction?
    <span class="tooltip-text" id="aiTip"></span>
  </span>

  <p class="disclaimer">
    Prediction accuracy may reduce during sudden rushes or events.
  </p>
</div>

<!-- Charts -->
<div class="output">
  <h3>ğŸ“ˆ Congestion Trend</h3>
  <canvas id="mliChart"></canvas>
</div>

<div class="output">
  <h3>ğŸ”® Short-Term Forecast</h3>
  <canvas id="forecastChart"></canvas>
</div>

<!-- Wait -->
<div class="output">
  <h3>â±ï¸ Recommended Wait Time</h3>
  <div class="wait-bar"><div id="waitFill"></div></div>
  <p id="waitText"></p>
</div>

<!-- Heatmap -->
<div class="output">
  <h3>ğŸ”¥ Congestion Heatmap</h3>
  <canvas id="heatmap"></canvas>
</div>

<!-- QR -->
<div class="output">
  <h3>ğŸ“· Share Live Status</h3>
  <img id="qr">
</div>

<!-- Admin -->
<div class="admin">
  <h2>ğŸ› ï¸ Admin Dashboard</h2>
  <pre id="adminSummary">No data yet</pre>
  <button onclick="exportCSV()">â¬‡ï¸ Export CSV</button>
</div>

<!-- Admin modal -->
<div id="adminModal" class="modal">
  <div class="modal-box">
    <h3>ğŸ” Admin Login</h3>
    <input type="password" id="adminPass" placeholder="Password">
    <button onclick="adminLogin()">Login</button>
    <p id="adminError"></p>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="script.js"></script>
</body>
</html>
